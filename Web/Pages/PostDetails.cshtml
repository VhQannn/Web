@page
@model Web.Pages.PostDetailsModel

@{
	ViewData["Title"] = "Bài đăng";
}
<style>
	/* General Styles */
	body {
		font-family: Arial, sans-serif;
		background-color: #f0f2f5;
	}

	/* Comment Section Styles */
	.comment-container {
		background-color: #fff;
		padding: 20px 25px;
		border-radius: 8px;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
		margin-top: 20px;
	}

		.comment-container label {
			font-size: 18px; /* Increase font-size for the label */
			display: block;
			margin-bottom: 15px;
		}

		.comment-container textarea {
			width: 100%;
			padding: 12px 15px; /* Increased padding */
			border: 1px solid #ccd0d5;
			border-radius: 18px;
			font-size: 15px; /* Increased font-size */
			resize: none;
			transition: border 0.3s; /* Added transition */
		}

			.comment-container textarea:focus {
				border-color: #1877f2; /* Change border color on focus */
			}



		.comment-container button {
			padding: 10px 20px; /* Increased padding */
			background-color: #1877f2;
			color: white;
			border: none;
			border-radius: 8px;
			cursor: pointer;
			font-size: 15px; /* Increased font-size */
			margin-top: 15px; /* Increased margin-top */
			transition: background-color 0.2s, transform 0.2s; /* Added transform transition */
		}

			.comment-container button:hover {
				background-color: #165dbb;
				transform: translateY(-2px); /* Added subtle lift on hover */
			}

	.comments-list {
		margin-top: 20px;
	}

	.comment {
		background-color: #fff;
		padding: 12px;
		border-radius: 8px;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
		margin: 10px 0;
	}

	.comment-top {
		display: flex;
		justify-content: space-between;
		align-items: center;
	}

	.comment-author {
		display: flex;
		align-items: center;
		margin-bottom: 0;
	}

	.comment-content {
		display: flex;
		align-items: center;
		margin-bottom: 0;
	}

	.avatar {
		width: 40px;
		height: 40px;
		border-radius: 50%;
		margin-right: 10px;
	}

	.author-name {
		font-weight: bold;
		font-size: 14px;
		color: #1d2129;
	}

	.comment-text {
		font-size: 15px;
		line-height: 2.4;
		color: #8c8c8c;
		font-weight: bold;
	}

	a {
		color: #1877f2;
		text-decoration: none;
	}

		a:hover {
			text-decoration: underline;
		}

	.edit-price-btn {
		background-color: #007bff;
		color: white;
		border: none;
		padding: 5px 10px;
		margin-bottom: 10px;
		margin-left: 10px;
		border-radius: 5px;
		cursor: pointer;
	}

		.edit-price-btn:hover {
			background-color: #0056b3;
		}

	.price-input {
		padding: 10px; /* Added padding to match button */
		border: 1px solid #ccd0d5; /* Added border */
		border-radius: 18px; /* Added border-radius */
		font-size: 15px; /* Increased font-size */
		margin-top: 10px; /* Increased margin-top */
		width: calc(100% - 28px); /* Adjust width to account for padding and border */
		transition: border 0.3s; /* Added transition */
	}

		.price-input:focus {
			border-color: #1877f2; /* Change border color on focus */
		}

		.price-input::placeholder {
			color: #8c8c8c; /* Lighten placeholder color */
		}

	.hidden {
		display: none;
	}

	.comment-price {
		display: flex;
		align-items: center;
		justify-content: flex-end;
		flex: 1;
		font-size: 16px; /* Tăng kích thước font cho giá */
		color: #e74c3c; /* Màu đỏ cho giá */
	}

	.comment-action {
		display: flex;
		align-items: center;
		justify-content: flex-end;
		flex: 1;
	}

	.price-display {
		margin-left: 5px; /* Thêm khoảng cách giữa biểu tượng và giá */
	}

	.price-icon {
		display: inline-block;
		width: 18px; /* Kích thước của biểu tượng */
		height: 18px;
		background: url('https://dl.dropbox.com/scl/fi/84tfpvsdpdoi65pvk0cre/flame_426833.png?rlkey=e1pjwoyfva95jczklwumgyv2v&dl=0') no-repeat center; /* Đường dẫn đến biểu tượng đóm lửa */
		background-size: contain; /* Đảm bảo biểu tượng fit với kích thước */
		margin-right: 5px; /* Thêm khoảng cách giữa biểu tượng và giá */
	}

	.popup {
		display: none;
		position: fixed;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		background-color: #fff;
		border-radius: 10px;
		box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
		z-index: 999;
		padding: 20px;
	}

		.popup.show {
			display: block;
		}

		.popup h2 {
			font-size: 24px;
			font-weight: bold;
			margin-top: 0;
			margin-bottom: 10px;
		}

		.popup p {
			font-size: 18px;
			line-height: 1.5;
			margin-bottom: 20px;
		}

		.popup img {
			display: block;
			max-width: 100%;
			height: auto;
			margin-bottom: 20px;
		}

		.popup span {
			background-color: #007bff;
			color: #fff;
			border: none;
			padding: 10px 20px;
			border-radius: 5px;
			font-size: 18px;
			cursor: pointer;
			transition: background-color 0.3s ease;
		}

			.popup span:hover {
				background-color: #0069d9;
			}

	.popup-backdrop {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		backdrop-filter: blur(5px);
		z-index: 998;
		display: none;
	}

		.popup-backdrop.show {
			display: block;
		}

</style>


<div>
	<hr />
	<dl class="row">
		<dt class="col-sm-2">
			@Html.DisplayNameFor(model => model.Post.PostTitle)
		</dt>
		<dd class="col-sm-10">
			@Html.DisplayFor(model => model.Post.PostTitle)
		</dd>
		<dt class="col-sm-2">
			@Html.DisplayNameFor(model => model.Post.PostContent)
		</dt>
		<dd class="col-sm-10">
			@Html.DisplayFor(model => model.Post.PostContent)
		</dd>
		<dt class="col-sm-2">
			@Html.DisplayNameFor(model => model.Post.PostDate)
		</dt>
		<dd class="col-sm-10">
			@Html.DisplayFor(model => model.Post.PostDate)
		</dd>
		<dt class="col-sm-2">
			@Html.DisplayNameFor(model => model.Post.TimeSlot)
		</dt>
		<dd class="col-sm-10">
			@Html.DisplayFor(model => model.Post.TimeSlot)
		</dd>
		<dt class="col-sm-2">
			@Html.DisplayNameFor(model => model.Post.Status)
		</dt>
		<dd class="col-sm-10">
			@Html.DisplayFor(model => model.Post.Status)
		</dd>
		<dt class="col-sm-2">
			@Html.DisplayNameFor(model => model.Post.PostCategory)
		</dt>
		<dd class="col-sm-10">
			@Html.DisplayFor(model => model.Post.PostCategory.PostCategoryId)
		</dd>
		<dt class="col-sm-2">
			@Html.DisplayNameFor(model => model.Post.User)
		</dt>
		<dd class="col-sm-10">
			@Html.DisplayFor(model => model.Post.User.UserId)
		</dd>
	</dl>
</div>
<div class="comment-container" id="comment-container">
	<label>Bình luận và đưa giá</label>
	<div>
		<textarea id="commentText" cols="90" rows="3" placeholder="Nhập bình luận của bạn..."></textarea>
		<input type="text" id="priceOffered" class="price-input price-vnd-format" placeholder="Đưa giá của bạn (đ)" />
		<button id="postCommentBtn">Đăng</button>
	</div>
</div>



<div class="comment-container">
	<label>Các bình luận hiện có:</label>
	<div id="comments-section" class="comments-list">
		<!-- Comments will be loaded here -->
	</div>
</div>

<div class="my-5">
	<a asp-page="/Index">Quay về trang chủ</a>
</div>


<span id="regError" data-my-attribute=""></span>

<div class="my-toast">
	<div id="toast"></div>
</div>

<div class="overlay" id="overlay"></div>

<div class="confirm-box" id="confirm-box">
	<div class="box-header">
		<h2>Chấp nhận giá offer này của supporter?</h2>
	</div>
	<div class="box-content">
		<p>Bạn sẽ thanh toán số tiền này cho supporter. Chúng tôi sẽ hoàn tiền nếu supporter này có hành vi lừa đảo</p>
	</div>
	<div class="button-container">
		<button id="yes-button">Yeah, Tôi xác nhận</button>
		<button id="no-button">Tôi sẽ suy nghĩ lại</button>
	</div>
</div>

<!-- Pop-up QR code -->
<div id="popup-backdrop" class="popup-backdrop"></div>
<div id="vietqr-popup" class="popup">
	<img id="txtQRCode" alt="VietQR code">
	<div style="margin-top: 5px;"><span id="popup-close" class="popup-close">Close</span></div>

</div>


<script>
	var postUserId = @Model.Post.User.UserId;
	const errorBox = document.getElementById('regError');

	function showToast(title, message, type) {
		toast({
			title: title,
			message: message,
			type: type,
			duration: 3000
		});
	}


</script>
