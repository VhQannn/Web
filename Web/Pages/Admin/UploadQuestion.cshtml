@page "/admin/upload-question"
@model Web.Pages.Admin.UploadQuestionModel

@{
    Layout = "admin_layout";
}

<head>
    <title>Upload Question Template</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#uploadForm').submit(function (e) {
                e.preventDefault();
                var formData = new FormData(this);
                $.ajax({
                    url: '/api/question-template',
                    type: 'POST',
                    data: formData,
                    contentType: false,
                    processData: false,
                    success: function (response) {
                        alert('Upload successful');
                        console.log(response);
                    },
                    error: function (xhr) {
                        if (xhr.status === 400) {
                            alert('Error: ' + xhr.responseJSON.Message);
                        } else {
                            alert('Upload failed: ' + xhr.responseText);
                        }
                    }
                });
            });
        });
    </script>
</head>
<form id="uploadForm" enctype="multipart/form-data">
    <label for="questionTemplateCode">Question Template Code:</label><br>
    <input type="text" id="questionTemplateCode" name="QuestionTemplateCode" required><br><br>

    <label for="jsonFile">JSON File:</label><br>
    <input type="file" id="jsonFile" name="jsonFile" accept=".json" required><br><br>

    <input type="submit" value="Upload">
</form>